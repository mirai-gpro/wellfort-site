---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
---

<BaseLayout title="お問い合わせ">
  <Header />

  <!-- ヒーローセクション -->
  <section class="contact-hero">
    <div class="container">
      <div class="hero-content fade-in">
        <h1 class="hero-title">お問い合わせ</h1>
        <p class="hero-subtitle">
          サービスに関するご質問やご相談など、<br>
          お気軽にお問い合わせください
        </p>
      </div>
    </div>
  </section>

  <!-- お問い合わせフォームセクション -->
  <section class="contact-form-section">
    <div class="container">
      <div class="form-wrapper fade-in">
        <div class="form-header">
          <h2>お問い合わせフォーム</h2>
          <p>下記のフォームに必要事項をご記入の上、送信してください。<br>
          通常2〜3営業日以内にご返信いたします。</p>
        </div>

        <form id="contact-form" class="contact-form">
          <!-- お名前 -->
          <div class="form-group">
            <label for="name" class="form-label">
              お名前 <span class="required">必須</span>
            </label>
            <input
              type="text"
              id="name"
              name="name"
              class="form-input"
              placeholder="山田 太郎"
              required
            />
          </div>

          <!-- フリガナ -->
          <div class="form-group">
            <label for="furigana" class="form-label">
              フリガナ <span class="required">必須</span>
            </label>
            <input
              type="text"
              id="furigana"
              name="furigana"
              class="form-input"
              placeholder="ヤマダ タロウ"
              required
            />
          </div>

          <!-- メールアドレス -->
          <div class="form-group">
            <label for="email" class="form-label">
              メールアドレス <span class="required">必須</span>
            </label>
            <input
              type="email"
              id="email"
              name="email"
              class="form-input"
              placeholder="example@email.com"
              required
            />
          </div>

          <!-- 電話番号 -->
          <div class="form-group">
            <label for="phone" class="form-label">
              電話番号 <span class="optional">任意</span>
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="form-input"
              placeholder="090-1234-5678"
            />
          </div>

          <!-- お問い合わせ種別 -->
          <div class="form-group">
            <label for="category" class="form-label">
              お問い合わせ種別 <span class="required">必須</span>
            </label>
            <select id="category" name="category" class="form-select" required>
              <option value="">選択してください</option>
              <option value="service">サービス内容について</option>
              <option value="inspection">検査について</option>
              <option value="price">料金について</option>
              <option value="consultation">オンライン面談について</option>
              <option value="technical">技術的なサポート</option>
              <option value="other">その他</option>
            </select>
          </div>

          <!-- お問い合わせ内容 -->
          <div class="form-group">
            <label for="message" class="form-label">
              お問い合わせ内容 <span class="required">必須</span>
            </label>
            <textarea
              id="message"
              name="message"
              class="form-textarea"
              rows="8"
              placeholder="お問い合わせ内容をご記入ください"
              required
            ></textarea>
          </div>

          <!-- プライバシーポリシー同意 -->
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input
                type="checkbox"
                id="privacy"
                name="privacy"
                class="form-checkbox"
                required
              />
              <span>
                <a href="/privacy" target="_blank" class="privacy-link">プライバシーポリシー</a>に同意する
              </span>
            </label>
          </div>

          <!-- 送信ボタン -->
          <div class="form-actions">
            <button type="submit" class="btn-submit">
              送信する
            </button>
          </div>

          <!-- 送信結果メッセージ -->
          <div id="form-message" class="form-message"></div>
        </form>
      </div>

      <!-- よくある質問へのリンク -->
      <div class="faq-link-section fade-in">
        <div class="faq-card">
          <h3>よくあるご質問</h3>
          <p>お問い合わせの前に、よくあるご質問もご確認ください</p>
          <a href="/faq" class="btn-faq">FAQを見る</a>
        </div>
      </div>
    </div>
  </section>

  <!-- お問い合わせ先情報 -->
  <section class="contact-info-section">
    <div class="container">
      <div class="contact-info-grid">
        <div class="info-card fade-in">
          <div class="info-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
          </div>
          <h3>メールでのお問い合わせ</h3>
          <p>info@wellfort.co.jp</p>
          <p class="info-note">24時間受付</p>
        </div>

        <div class="info-card fade-in">
          <div class="info-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
          </div>
          <h3>お電話でのお問い合わせ</h3>
          <p class="phone-number">03-6629-3522</p>
          <p class="info-note">平日 10:00〜18:00</p>
        </div>

        <div class="info-card fade-in">
          <div class="info-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
          </div>
          <h3>営業時間</h3>
          <p>平日 10:00〜18:00</p>
          <p class="info-note">土日祝日は休業</p>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const fadeInObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -80px 0px'
    });

    document.querySelectorAll('.fade-in').forEach(el => {
      fadeInObserver.observe(el);
    });
  });

  const form = document.getElementById('contact-form') as HTMLFormElement;
  const formMessage = document.getElementById('form-message') as HTMLElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const submitBtn = form.querySelector('.btn-submit') as HTMLButtonElement;
    const originalText = submitBtn.textContent;

    submitBtn.disabled = true;
    submitBtn.textContent = '送信中...';
    formMessage.textContent = '';
    formMessage.className = 'form-message';

    try {
      await new Promise(resolve => setTimeout(resolve, 1500));

      formMessage.textContent = 'お問い合わせを送信しました。ご連絡ありがとうございます。';
      formMessage.className = 'form-message success';
      form.reset();

    } catch (error) {
      formMessage.textContent = '送信に失敗しました。もう一度お試しください。';
      formMessage.className = 'form-message error';
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });
</script>

<style>
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .contact-hero {
    background: linear-gradient(135deg, #40b0a0 0%, #2d8a7e 100%);
    padding: 140px 0 80px;
    text-align: center;
    color: white;
  }

  .hero-title {
    font-size: clamp(32px, 5vw, 48px);
    font-weight: 700;
    margin-bottom: 20px;
  }

  .hero-subtitle {
    font-size: clamp(16px, 2.5vw, 20px);
    line-height: 1.8;
    opacity: 0.95;
  }

  .contact-form-section {
    padding: 80px 0;
    background: #f8f9fa;
  }

  .form-wrapper {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    padding: 60px;
    border-radius: 20px;
    box-shadow: 0 4px 30px rgba(0,0,0,0.08);
  }

  .form-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .form-header h2 {
    font-size: 32px;
    color: #2c3e50;
    margin-bottom: 15px;
  }

  .form-header p {
    font-size: 16px;
    color: #666;
    line-height: 1.8;
  }

  .form-group {
    margin-bottom: 30px;
  }

  .form-label {
    display: block;
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 10px;
  }

  .required {
    color: #e74c3c;
    font-size: 14px;
    margin-left: 8px;
  }

  .optional {
    color: #95a5a6;
    font-size: 14px;
    margin-left: 8px;
  }

  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
    padding: 14px 18px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    font-size: 16px;
    transition: all 0.3s ease;
    box-sizing: border-box;
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: none;
    border-color: #40b0a0;
    box-shadow: 0 0 0 4px rgba(64, 176, 160, 0.1);
  }

  .form-textarea {
    resize: vertical;
    min-height: 150px;
    font-family: inherit;
  }

  .checkbox-group {
    margin: 40px 0;
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 15px;
    color: #555;
  }

  .form-checkbox {
    width: 20px;
    height: 20px;
    margin-right: 10px;
    cursor: pointer;
    accent-color: #40b0a0;
  }

  .privacy-link {
    color: #40b0a0;
    text-decoration: underline;
  }

  .privacy-link:hover {
    color: #2d8a7e;
  }

  .form-actions {
    text-align: center;
    margin-top: 40px;
  }

  .btn-submit {
    background: linear-gradient(135deg, #40b0a0 0%, #2d8a7e 100%);
    color: white;
    padding: 16px 60px;
    border: none;
    border-radius: 50px;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(64, 176, 160, 0.3);
  }

  .btn-submit:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(64, 176, 160, 0.4);
  }

  .btn-submit:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .form-message {
    margin-top: 30px;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    font-size: 16px;
    font-weight: 600;
  }

  .form-message.success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }

  .form-message.error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }

  .faq-link-section {
    max-width: 800px;
    margin: 60px auto 0;
  }

  .faq-card {
    background: white;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  }

  .faq-card h3 {
    font-size: 24px;
    color: #2c3e50;
    margin-bottom: 15px;
  }

  .faq-card p {
    font-size: 16px;
    color: #666;
    margin-bottom: 25px;
  }

  .btn-faq {
    display: inline-block;
    padding: 12px 40px;
    background: #40b0a0;
    color: white;
    border-radius: 50px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .btn-faq:hover {
    background: #2d8a7e;
    transform: translateY(-2px);
  }

  .contact-info-section {
    padding: 80px 0;
    background: white;
  }

  .contact-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 40px;
    max-width: 1000px;
    margin: 0 auto;
  }

  .info-card {
    background: linear-gradient(135deg, #e0f5f2 0%, #d0ebe7 100%);
    padding: 40px 30px;
    border-radius: 20px;
    text-align: center;
    transition: all 0.3s ease;
  }

  .info-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
  }

  .info-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 20px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #40b0a0;
  }

  .info-card h3 {
    font-size: 20px;
    color: #2c3e50;
    margin-bottom: 15px;
  }

  .info-card p {
    font-size: 16px;
    color: #555;
    margin-bottom: 5px;
  }

  .phone-number {
    font-size: 24px !important;
    font-weight: 700;
    color: #40b0a0 !important;
  }

  .info-note {
    font-size: 14px !important;
    color: #999 !important;
    margin-top: 10px;
  }

  .fade-in {
    opacity: 0;
    transition: opacity 1s ease-out;
  }

  .fade-in.is-visible {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .contact-hero {
      padding: 120px 0 60px;
    }

    .form-wrapper {
      padding: 40px 30px;
    }

    .form-header h2 {
      font-size: 26px;
    }

    .btn-submit {
      width: 100%;
      padding: 16px 40px;
    }

    .contact-info-grid {
      grid-template-columns: 1fr;
      gap: 30px;
    }
  }
</style>
